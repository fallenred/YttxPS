<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yttx.yttxps.mapper.TransportarrangePriceMapper">
  <resultMap id="BaseResultMap" type="com.yttx.yttxps.model.TransportarrangePrice">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jan 24 18:25:21 CST 2016.
    -->
    <id column="fs_resno" jdbcType="CHAR" property="fsResno" />
    <id column="fi_genindex" jdbcType="DECIMAL" property="fiGenindex" />
    <id column="tgenname" jdbcType="CHAR" property="tgenname" />
    <id column="fs_transno" jdbcType="CHAR" property="fsTransNo" />
    <id column="transname" jdbcType="CHAR" property="transName" />
    <id column="fs_restype" jdbcType="CHAR" property="fsRestype" />
    <id column="fs_ccno" jdbcType="CHAR" property="fsCcno" />
    <id column="fs_ccname" jdbcType="CHAR" property="fsCcname" />
    <id column="ft_startdate" jdbcType="DATE" property="ftStartdate" />
    <id column="ft_enddate" jdbcType="DATE" property="ftEnddate" />
    <id column="fd_price" jdbcType="DECIMAL" property="fdPrice" />
  </resultMap>
  
  <sql id="selectSelectiveCondition">
    <if test="fsResno != null and fsResno != ''"><!-- 车型线路资源ID -->
	  and fs_resno = #{fsResno}
	</if>
    <if test="fiGenindex != null"><!-- 线路统称自动序号 -->
	  and fi_genindex = #{fiGenindex}
	</if>
	<if test="tgenname != null and tgenname != ''"><!-- 线路统称名字 -->
	  and tgenname like '%'||#{tgenname}||'%'
	</if>
	<if test="fsTransNo != null and fsTransNo != ''"><!-- 车型代码 -->
	  and fs_transno = #{fsTransNo}
	</if>
	<if test="transName != null and transName != ''"><!-- 车型名称 -->
	  and transname like '%'||#{transName}||'%'
	</if>
	<if test="fsCcno != null and fsCcno != ''"><!-- 消费选项编号 -->
	  and fs_ccno = #{fsCcno}
	</if>
	<if test="fsCcname != null and fsCcname != ''"><!-- 消费选项名称 -->
	  and fs_ccname = #{fsCcname}
	</if>
	<if test="ftStartdate != null"><!-- 开始日期 -->
	  and ft_startdate = #{ftStartdate}
	</if>
	<if test="ftEnddate != null"><!-- 结束日期 -->
	  and ft_enddate = #{ftEnddate}
	</if>
	<if test="fdPrice != null"><!-- 价格 -->
	  and fd_price = #{fdPrice}
	</if>
  </sql>
  
  <!-- 分页查询总记录 -->
  <select id="selectCountSelective" parameterType="java.util.Map" resultType="int">
  	select count(1) 
  	  from view_ttransportarrangeprice t
	 where 1 = 1
     <include refid="selectSelectiveCondition" />
  </select>
  
  <!-- 分页查询 -->
  <select id="selectSelectivePage" parameterType="java.util.Map" resultMap="BaseResultMap">
    select * 
      from (select ROWNUM as rowno, 
                   t.* 
              from view_ttransportarrangeprice t
    	     where 1 = 1
    <include refid="selectSelectiveCondition" />
	) tt where 1 = 1
	<if test="startrow != null">
	  and tt.rowno &gt; #{startrow}
	</if>
  </select>
</mapper>